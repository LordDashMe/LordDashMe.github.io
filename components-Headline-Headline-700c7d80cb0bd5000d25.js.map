{"version":3,"sources":["webpack:///./src/components/Headline/Headline.tsx"],"names":["Headline","properties","state","headline","id","content","componentDidMount","isSSR","this","fetchHeadlineOnFireStore","window","lorddashme_headline","Firestore","clearInstance","initialize","getInstance","collection","where","limit","get","then","querySnapshot","docs","document","data","setState","console","log","getHeadlineContent","className","style","dangerouslySetInnerHTML","__html","render","Component"],"mappings":"iPAyBqBA,E,oBAEnB,WAAmBC,GAAiB,aAClC,cAAMA,IAAN,MAEKC,MAAQ,CACXC,SAAU,CACRC,GAAI,GACJC,QAAS,KANqB,E,kHAW7BC,kBAAP,WACQC,eACJC,KAAKC,4B,EAIDA,yBAAR,WAAyC,gBAEG,IAA/BC,OAAOC,qBAEhBC,IAAUC,gBACVD,IAAUE,aACVF,IAAUG,cACPC,WAAW,aACXC,MAAM,SAAU,MAAM,GACtBC,MAAM,GACNC,MACAC,MAAK,SAACC,GAEL,QAAqC,IAA1BA,EAAcC,KAAK,GAAoB,CAEhD,IAAMC,EAAgBF,EAAcC,KAAK,GAAGE,OAE5Cd,OAAOC,oBAAsB,CAC3BP,GAAIiB,EAAcC,KAAK,GAAGlB,GAC1BC,QAASkB,EAASlB,SAGpB,EAAKoB,SAAS,CACZtB,SAAU,CACRC,GAAIiB,EAAcC,KAAK,GAAGlB,GAC1BC,QAASkB,EAASlB,WAItBqB,QAAQC,IAAI,4CAMlBnB,KAAKiB,SAAS,CACZtB,SAAU,CACRC,GAAIM,OAAOC,oBAAoBP,GAC/BC,QAASK,OAAOC,oBAAoBN,Y,EAMpCuB,mBAAR,WACE,OACE,yBAAKC,UAAWC,IAAK,SACnB,2BAAOC,wBAAyB,CAAEC,OAAQxB,KAAKN,MAAMC,SAASE,a,EAK7D4B,OAAP,WAEE,OAAKzB,KAAKN,MAAMC,SAASE,QAKvB,yBAAKD,GAAG,qBAAqByB,UAAWC,IAAK,WAC1CtB,KAAKoB,sBALA,+B,GA1EwBM","file":"components-Headline-Headline-700c7d80cb0bd5000d25.js","sourcesContent":["import React, { Component } from 'react';\n\nimport { isSSR } from '../../common/helper';\n\nimport Firestore from '../Database/Firebase/Firestore';\n\nimport style from './Headline.module.scss';\n\ndeclare global {\n  interface Window {\n    lorddashme_headline: IHeadline;\n  }\n}\n\ninterface IProperty {}\n\ninterface IState {\n  headline: IHeadline;\n}\n\ninterface IHeadline {\n  id: string;\n  content: string;\n}\n\nexport default class Headline extends Component<IProperty, IState> {\n\n  public constructor(properties: any) {\n    super(properties);\n\n    this.state = {\n      headline: {\n        id: '',\n        content: ''\n      }\n    };\n  }\n\n  public componentDidMount(): void {\n    if (! isSSR()) {\n      this.fetchHeadlineOnFireStore(); \n    }\n  }\n\n  private fetchHeadlineOnFireStore(): void {\n\n    if (typeof window.lorddashme_headline === 'undefined') {\n      \n      Firestore.clearInstance();\n      Firestore.initialize();\n      Firestore.getInstance()\n        .collection('headlines')\n        .where('active', '==', true)\n        .limit(1)\n        .get()\n        .then((querySnapshot: any): void => {\n\n          if (typeof querySnapshot.docs[0] !== 'undefined') {\n            \n            const document: any = querySnapshot.docs[0].data();\n\n            window.lorddashme_headline = {\n              id: querySnapshot.docs[0].id,\n              content: document.content\n            };\n\n            this.setState({\n              headline: {\n                id: querySnapshot.docs[0].id,\n                content: document.content\n              }  \n            });\n\n            console.log('Headline_Component: Fresh headline!');\n          }        \n        });\n\n    } else {\n\n      this.setState({\n        headline: {\n          id: window.lorddashme_headline.id,\n          content: window.lorddashme_headline.content\n        }  \n      });\n    }\n  }\n\n  private getHeadlineContent(): JSX.Element {\n    return (\n      <div className={style['content']}>\n        <small dangerouslySetInnerHTML={{ __html: this.state.headline.content }}></small>\n      </div>\n    );\n  }\n\n  public render(): JSX.Element {\n    \n    if (!this.state.headline.content) {\n      return (<div></div>);  \n    }\n\n    return (\n      <div id=\"headline-component\" className={style['container']}>\n        {this.getHeadlineContent()}\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}