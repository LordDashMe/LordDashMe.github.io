{"version":3,"sources":["webpack:///./src/pages/ph-covid19-tracker/components/StatusOverview/StatusOverview.tsx","webpack:///./src/components/Animation/AnimateNumber/AnimateNumber.tsx","webpack:///./node_modules/performance-now/lib/performance-now.js","webpack:///./node_modules/raf/index.js"],"names":["ShareButton","loadable","fallback","loadableFallbackTemplate","TweetButton","StatusOverview","properties","state","loader","pageUrl","statusOverview","id","sysId","label","count","color","order","asOfDateTime","componentDidMount","isSSR","this","setPageUrl","fetchPHCOVID19TrackerStatusOverviewOnFireStore","document","location","href","setState","Firestore","clearInstance","initialize","getInstance","collection","orderBy","get","then","querySnapshot","docs","map","doc","data","filteredDocument","sys_id","getStatusOverview","filter","key","className","style","value","isCommaSeparated","getConfirmCases","getAsOfDateTime","getSocialMediaButtons","render","Component","AnimateNumber","animated","number","commaSeparated","raf","getAnimated","bind","props","cancel","setNumber","fps","DEFAULT_FPS","Math","ceil","convertCommaSeparatedNumber","toString","replace","getNumber","getNanoSeconds","hrtime","loadTime","moduleLoadTime","nodeLoadTime","upTime","performance","now","module","exports","process","hr","uptime","Date","getTime","call","root","window","global","vendors","suffix","caf","i","length","last","queue","callback","_now","next","max","setTimeout","cp","slice","cancelled","e","round","push","handle","fn","apply","arguments","polyfill","object","requestAnimationFrame","cancelAnimationFrame"],"mappings":"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","file":"components-StatusOverview-StatusOverview-3e554721a97052e8a87f.js","sourcesContent":["import React, { Component } from 'react';\nimport loadable from '@loadable/component';\n\nimport { isSSR, loadableFallbackTemplate } from '../../../../common/helper';\n\nimport Firestore from '../../../../components/Database/Firebase/Firestore';\nimport AnimateNumber from '../../../../components/Animation/AnimateNumber/AnimateNumber';\n\nconst ShareButton = loadable(() => import('../../../../components/SocialMedia/Facebook/ShareButton'), { fallback: loadableFallbackTemplate(`#social-media-facebook-share-button-component`) });\nconst TweetButton = loadable(() => import('../../../../components/SocialMedia/Twitter/TweetButton'), { fallback: loadableFallbackTemplate(`#social-media-twitter-tweet-button-component`) });\n\nimport style from './StatusOverview.module.scss';\n\ninterface IProperty {}\n\ninterface IState {\n  loader: boolean;\n  pageUrl: string;\n  statusOverview: IStatusOverview[];\n}\n\nexport interface IStatusOverview {\n  id: string;\n  sysId: string;\n  label: string;\n  count: number;\n  color: string;\n  order: number;\n  asOfDateTime?: string;\n}\n\nexport default class StatusOverview extends Component<IProperty, IState> {\n\n  public constructor(properties: any) {\n    \n    super(properties);\n    \n    this.state = {\n      loader: true,\n      pageUrl: '/ph-covid19-tracker/',\n      statusOverview: [\n        {\n          id: 'id_confirmed_cases',\n          sysId: 'confirmed_cases',\n          label: 'CONFIRMED CASES',\n          count: 0,\n          color: '#6f6f6f',\n          order: 4,\n          asOfDateTime: '' // March 20, 2020 7PM PST\n        },\n        {\n          id: 'id_active_cases',\n          sysId: 'active_cases',\n          label: 'ACTIVE CASES',\n          count: 0,\n          order: 3,\n          color: '#e29e01'\n        },\n        {\n          id: 'id_recovered',\n          sysId: 'recovered',\n          label: 'RECOVERED',\n          count: 0,\n          order: 2,\n          color: '#60a138'\n        },\n        {\n          id: 'id_deaths',\n          sysId: 'deaths',\n          label: 'DEATHS',\n          count: 0,\n          order: 1,\n          color: '#a13838'\n        }\n      ]\n    };\n  }\n\n  public componentDidMount(): void {\n    if (! isSSR()) {\n      this.setPageUrl();\n      this.fetchPHCOVID19TrackerStatusOverviewOnFireStore(); \n    }\n  }\n\n  private setPageUrl(): void {\n    \n    const state = {...this.state};\n    \n    state.pageUrl = document.location.href;\n    \n    this.setState(state);\n  }\n\n  private fetchPHCOVID19TrackerStatusOverviewOnFireStore(): void {\n    \n    Firestore.clearInstance();\n    Firestore.initialize();\n    Firestore.getInstance()\n      .collection('ph-covid19-tracker-status-overview')\n      .orderBy('order', 'desc')\n      .get()\n      .then((querySnapshot: any): void => {\n\n        const statusOverview: any = querySnapshot.docs.map((doc: any): IStatusOverview => {\n          \n          const document: any = doc.data();\n          \n          const filteredDocument: IStatusOverview = {\n            id: doc.id,\n            sysId: document.sys_id,\n            label: document.label,\n            count: document.count,\n            color: document.color,\n            order: document.order\n          };\n          \n          if (typeof document.asOfDateTime !== 'undefined') {\n            filteredDocument['asOfDateTime'] = document.asOfDateTime;\n          }\n\n          return filteredDocument;\n        });\n\n        this.setState({\n          statusOverview: statusOverview,\n          loader: false\n        });\n      });\n  }\n\n  private getStatusOverview(): JSX.Element[] {\n    return (this.state.statusOverview)\n      .filter((statusOverview: IStatusOverview): IStatusOverview | boolean => {\n        \n        if (statusOverview.sysId === 'confirmed_cases') {\n          return false;\n        }\n\n        return statusOverview;\n      })\n      .map((statusOverview: IStatusOverview): JSX.Element => {\n        \n        return (\n          <div key={statusOverview.id} className={style['item-case'] + ' ' + statusOverview.sysId}>\n            <h2>{statusOverview.label}</h2>\n            <p style={{'color': statusOverview.color}}>\n              <AnimateNumber value={statusOverview.count} isCommaSeparated={true} />\n            </p>\n          </div>\n        );\n      });\n  }\n\n  private getConfirmCases(): JSX.Element {\n    return (\n      <div key={this.state.statusOverview[0].id} className={style['confirmed-case']}>\n        <h2>{this.state.statusOverview[0].label}</h2>\n        <p style={{'color': this.state.statusOverview[0].color}}>\n          <AnimateNumber value={this.state.statusOverview[0].count} isCommaSeparated={true} />\n        </p>\n      </div>\n    );\n  }\n\n  private getAsOfDateTime(): JSX.Element | null {\n    \n    if (typeof this.state.statusOverview[0].asOfDateTime === 'undefined' || !this.state.statusOverview[0].asOfDateTime) {\n      return null;\n    }\n    \n    return (\n      <p className={style['as-of-date-time']}>As of {this.state.statusOverview[0].asOfDateTime}</p>\n    );\n  }\n\n  private getSocialMediaButtons(): JSX.Element | null {\n    \n    if (! isSSR()) {\n      return (\n        <div className={style['social-media-buttons']}>\n          <TweetButton href={this.state.pageUrl} />\n          <ShareButton href={this.state.pageUrl} />\n        </div>\n      );\n    }\n    \n    return null;\n  }\n\n  public render(): JSX.Element {\n    return (\n      <div id=\"ph-covid19-tracker-status-overview-component\" className={style['container']}>\n        {this.getStatusOverview()}\n        {this.getConfirmCases()}\n        {this.getAsOfDateTime()}\n        {this.getSocialMediaButtons()}\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport raf from 'raf';\n\ninterface IProperty {\n  value: number;\n  isCommaSeparated?: boolean;\n  fps?: number;\n}\n\ninterface IState {\n  number: number;\n  commaSeparated: string;\n}\n\nexport default class AnimateNumber extends Component<IProperty, IState> {\n\n  private static readonly DEFAULT_FPS: number = 60;\n\n  private animated: any = null;\n\n  public constructor(properties: any) {\n    \n    super(properties);\n    \n    this.state = {\n      number: 0,\n      commaSeparated: '0'\n    }\n  }\n\n  public componentDidMount(): void {\n    this.animated = raf(this.getAnimated.bind(this));\n  }\n\n  private getAnimated(): void {\n\n    if (! this.props.value) {\n      return;\n    }\n\n    let number: number = this.state.number;\n    if (number >= this.props.value) {\n      raf.cancel(this.animated);\n      this.setNumber(this.props.value);\n      return;\n    }\n\n    let fps: number = AnimateNumber.DEFAULT_FPS;\n    \n    if (typeof this.props.fps !== 'undefined' && this.props.fps) {\n      fps = this.props.fps;\n    }\n\n    number += Math.ceil(this.props.value / fps);\n\n    this.setNumber(number);\n    this.animated = raf(this.getAnimated.bind(this));\n  }\n\n  private setNumber(number: number): void {\n    this.setState({\n      number: number,\n      commaSeparated: this.convertCommaSeparatedNumber(number)\n    });\n  }\n\n  private convertCommaSeparatedNumber(number: number): string {\n    return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  }\n\n  private getNumber(): number | string {\n\n    if (typeof this.props.isCommaSeparated !== 'undefined' && this.props.isCommaSeparated) {\n      return this.state.commaSeparated;\n    }\n    \n    return this.state.number;\n  }\n\n  public render(): JSX.Element {\n    return (\n      <span id=\"animation-animate-number-component\">{this.getNumber()}</span>\n    );\n  }\n}\n","require(\"core-js/modules/es6.date.now\");\n\n// Generated by CoffeeScript 1.12.2\n(function () {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if (typeof performance !== \"undefined\" && performance !== null && performance.now) {\n    module.exports = function () {\n      return performance.now();\n    };\n  } else if (typeof process !== \"undefined\" && process !== null && process.hrtime) {\n    module.exports = function () {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n\n    hrtime = process.hrtime;\n\n    getNanoSeconds = function getNanoSeconds() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function () {\n      return Date.now() - loadTime;\n    };\n\n    loadTime = Date.now();\n  } else {\n    module.exports = function () {\n      return new Date().getTime() - loadTime;\n    };\n\n    loadTime = new Date().getTime();\n  }\n}).call(this);","var now = require('performance-now'),\n    root = typeof window === 'undefined' ? global : window,\n    vendors = ['moz', 'webkit'],\n    suffix = 'AnimationFrame',\n    raf = root['request' + suffix],\n    caf = root['cancel' + suffix] || root['cancelRequest' + suffix];\n\nfor (var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix];\n  caf = root[vendors[i] + 'Cancel' + suffix] || root[vendors[i] + 'CancelRequest' + suffix];\n} // Some versions of FF have rAF but not cAF\n\n\nif (!raf || !caf) {\n  var last = 0,\n      id = 0,\n      queue = [],\n      frameDuration = 1000 / 60;\n\n  raf = function raf(callback) {\n    if (queue.length === 0) {\n      var _now = now(),\n          next = Math.max(0, frameDuration - (_now - last));\n\n      last = next + _now;\n      setTimeout(function () {\n        var cp = queue.slice(0); // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n\n        queue.length = 0;\n\n        for (var i = 0; i < cp.length; i++) {\n          if (!cp[i].cancelled) {\n            try {\n              cp[i].callback(last);\n            } catch (e) {\n              setTimeout(function () {\n                throw e;\n              }, 0);\n            }\n          }\n        }\n      }, Math.round(next));\n    }\n\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    });\n    return id;\n  };\n\n  caf = function caf(handle) {\n    for (var i = 0; i < queue.length; i++) {\n      if (queue[i].handle === handle) {\n        queue[i].cancelled = true;\n      }\n    }\n  };\n}\n\nmodule.exports = function (fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn);\n};\n\nmodule.exports.cancel = function () {\n  caf.apply(root, arguments);\n};\n\nmodule.exports.polyfill = function (object) {\n  if (!object) {\n    object = root;\n  }\n\n  object.requestAnimationFrame = raf;\n  object.cancelAnimationFrame = caf;\n};"],"sourceRoot":""}