{"version":3,"sources":["webpack:///./src/pages/ph-covid19-tracker/components/StatusOverview/StatusOverview.tsx","webpack:///./src/components/Animation/AnimateNumber/AnimateNumber.tsx","webpack:///./src/components/Loader/Loader.tsx","webpack:///./node_modules/performance-now/lib/performance-now.js","webpack:///./node_modules/raf/index.js"],"names":["ShareButton","loadable","fallback","loadableFallbackTemplate","TweetButton","StatusOverview","properties","state","loader","pageUrl","statusOverview","id","sysId","label","count","color","asOfDateTime","componentDidMount","isSSR","this","setPageUrl","fetchPHCOVID19TrackerStatusOverviewOnFireStore","document","location","href","setState","Firestore","clearInstance","initialize","getInstance","collection","orderBy","get","then","querySnapshot","docs","map","doc","data","filteredDocument","sys_id","getStatusOverview","filter","key","className","style","value","isCommaSeparated","getConfirmCases","getAsOfDateTime","getSocialMediaButtons","render","visibility","Component","AnimateNumber","animated","number","commaSeparated","raf","getAnimated","bind","props","cancel","setNumber","fps","DEFAULT_FPS","Math","ceil","toString","replace","getNumber","Loader","loaderClasses","getNanoSeconds","hrtime","loadTime","moduleLoadTime","nodeLoadTime","upTime","performance","now","module","exports","process","hr","uptime","Date","getTime","call","root","window","global","vendors","suffix","caf","i","length","last","queue","callback","_now","next","max","setTimeout","cp","slice","cancelled","e","round","push","handle","fn","apply","arguments","polyfill","object","requestAnimationFrame","cancelAnimationFrame"],"mappings":"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","file":"component---src-pages-ph-covid-19-tracker-components-status-overview-status-overview-tsx-93ef68c145bd753e3d9c.js","sourcesContent":["import React, { Component } from 'react';\nimport loadable from '@loadable/component';\n\nimport { isSSR, loadableFallbackTemplate } from '../../../../common/helper';\n\nimport Loader from '../../../../components/Loader/Loader';\nimport Firestore from '../../../../components/Database/Firebase/Firestore';\n\nimport AnimateNumber from '../../../../components/Animation/AnimateNumber/AnimateNumber';\n\nconst ShareButton = loadable(() => import('../../../../components/SocialMedia/Facebook/ShareButton'), { fallback: loadableFallbackTemplate(`#social-media-facebook-share-button-component`) });\nconst TweetButton = loadable(() => import('../../../../components/SocialMedia/Twitter/TweetButton'), { fallback: loadableFallbackTemplate(`#social-media-twitter-tweet-button-component`) });\n\nimport style from './StatusOverview.module.scss';\n\ninterface IProperty {}\n\ninterface IState {\n  loader: boolean;\n  pageUrl: string;\n  statusOverview: IStatusOverview[];\n}\n\ninterface IStatusOverview {\n  id: string;\n  sysId: string;\n  label: string;\n  count: number;\n  color: string;\n  asOfDateTime?: string;\n}\n\nexport default class StatusOverview extends Component<IProperty, IState> {\n\n  public constructor(properties: any) {\n    \n    super(properties);\n    \n    this.state = {\n      loader: true,\n      pageUrl: '/ph-covid19-tracker/',\n      statusOverview: [\n        {\n          id: 'id_confirmed_cases',\n          sysId: 'confirmed_cases',\n          label: 'CONFIRMED CASES',\n          count: 0,\n          color: '#6f6f6f',\n          asOfDateTime: '' // March 20, 2020 7PM PST\n        },\n        {\n          id: 'id_active_cases',\n          sysId: 'active_cases',\n          label: 'ACTIVE CASES',\n          count: 0,\n          color: '#e29e01'\n        },\n        {\n          id: 'id_recovered',\n          sysId: 'recovered',\n          label: 'RECOVERED',\n          count: 0,\n          color: '#60a138'\n        },\n        {\n          id: 'id_deaths',\n          sysId: 'deaths',\n          label: 'DEATHS',\n          count: 0,\n          color: '#a13838'\n        }\n      ]\n    };\n  }\n\n  public componentDidMount(): void {\n    if (! isSSR()) {\n      this.setPageUrl();\n      this.fetchPHCOVID19TrackerStatusOverviewOnFireStore(); \n    }\n  }\n\n  private setPageUrl(): void {\n    const state = {...this.state};\n    state.pageUrl = document.location.href;\n    this.setState(state);\n  }\n\n  private fetchPHCOVID19TrackerStatusOverviewOnFireStore(): void {\n    \n    Firestore.clearInstance();\n    Firestore.initialize();\n    Firestore.getInstance()\n      .collection('ph-covid19-tracker-status-overview')\n      .orderBy('order', 'desc')\n      .get()\n      .then((querySnapshot: any): void => {\n\n        const statusOverview: any = querySnapshot.docs.map((doc: any): IStatusOverview => {\n          \n          const document: any = doc.data();\n          \n          const filteredDocument: IStatusOverview = {\n            id: doc.id,\n            sysId: document.sys_id,\n            label: document.label,\n            count: document.count,\n            color: document.color\n          };\n          \n          if (typeof document.asOfDateTime !== 'undefined') {\n            filteredDocument['asOfDateTime'] = document.asOfDateTime;\n          }\n\n          return filteredDocument;\n        });\n\n        this.setState({\n          statusOverview: statusOverview,\n          loader: false\n        });\n      });\n  }\n\n  private getStatusOverview(): JSX.Element[] {\n    return (this.state.statusOverview)\n      .filter((statusOverview: IStatusOverview): IStatusOverview | boolean => {\n        \n        if (statusOverview.sysId === 'confirmed_cases') {\n          return false;\n        }\n\n        return statusOverview;\n      })\n      .map((statusOverview: IStatusOverview): JSX.Element => {\n        \n        return (\n          <div key={statusOverview.id} className={style['item-case'] + ' ' + statusOverview.sysId}>\n            <h2>{statusOverview.label}</h2>\n            <p style={{'color': statusOverview.color}}>\n              <AnimateNumber value={statusOverview.count} isCommaSeparated={true} />\n            </p>\n          </div>\n        );\n      });\n  }\n\n  private getConfirmCases(): JSX.Element {\n    return (\n      <div key={this.state.statusOverview[0].id} className={style['confirmed-case']}>\n        <h2>{this.state.statusOverview[0].label}</h2>\n        <p style={{'color': this.state.statusOverview[0].color}}>\n          <AnimateNumber value={this.state.statusOverview[0].count} isCommaSeparated={true} />\n        </p>\n      </div>\n    );\n  }\n\n  private getAsOfDateTime(): JSX.Element {\n    \n    if (typeof this.state.statusOverview[0].asOfDateTime === 'undefined' || !this.state.statusOverview[0].asOfDateTime) {\n      return (<div></div>);\n    }\n    \n    return (\n      <p className={style['as-of-date-time']}>As of {this.state.statusOverview[0].asOfDateTime}</p>\n    );\n  }\n\n  private getSocialMediaButtons(): JSX.Element {\n    \n    if (! isSSR()) {\n      return (\n        <div className={style['social-media-buttons']}>\n          <TweetButton href={this.state.pageUrl} />\n          <ShareButton href={this.state.pageUrl} />\n        </div>\n      );\n    }\n    \n    return (<div></div>);\n  }\n\n  public render(): JSX.Element {\n    return (\n      <div id=\"ph-covid19-tracker-status-overview-component\" className={style['container']}>\n        <Loader visibility={this.state.loader}/>\n        {this.getStatusOverview()}\n        {this.getConfirmCases()}\n        {this.getAsOfDateTime()}\n        {this.getSocialMediaButtons()}\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport raf from 'raf';\n\ninterface IProperty {\n  value: number;\n  isCommaSeparated?: boolean;\n  fps?: number;\n}\n\ninterface IState {\n  number: number;\n  commaSeparated: string;\n}\n\nexport default class AnimateNumber extends Component<IProperty, IState> {\n\n  private static readonly DEFAULT_FPS: number = 60;\n\n  private animated: any = null;\n\n  public constructor(properties: any) {\n    \n    super(properties);\n    \n    this.state = {\n      number: 0,\n      commaSeparated: '0'\n    }\n  }\n\n  public componentDidMount(): void {\n    this.animated = raf(this.getAnimated.bind(this));\n  }\n\n  private getAnimated(): void {\n\n    if (!this.props.value) {\n      return;\n    }\n\n    let number: number = this.state.number;\n    if (number >= this.props.value) {\n      raf.cancel(this.animated);\n      this.setNumber(this.props.value);\n      return;\n    }\n\n    let fps: number = AnimateNumber.DEFAULT_FPS;\n    \n    if (typeof this.props.fps !== 'undefined' && this.props.fps) {\n      fps = this.props.fps;\n    }\n\n    number += Math.ceil(this.props.value / fps);\n\n    this.setNumber(number);\n    this.animated = raf(this.getAnimated.bind(this));\n  }\n\n  private setNumber(number: number): void {\n    this.setState({\n      number: number,\n      commaSeparated: number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n    });\n  }\n\n  private getNumber(): number | string {\n\n    if (typeof this.props.isCommaSeparated !== 'undefined' && this.props.isCommaSeparated) {\n      return this.state.commaSeparated;\n    }\n    \n    return this.state.number;\n  }\n\n  public render(): JSX.Element {\n    return (\n      <span id=\"animation-animate-number-component\">{this.getNumber()}</span>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nimport style from './Loader.module.scss';\n\ninterface IProperty {\n  visibility: boolean;\n}\n\ninterface IState {}\n\nexport default class Loader extends Component<IProperty, IState> {\n\n  public render(): JSX.Element {\n\n    let loaderClasses: string = style['signal-wrapper'];\n    \n    if (! this.props.visibility) {\n      loaderClasses += ' ' + style['off'];\n    }\n\n    return (\n      <div id=\"loader-component\" className={style['container']}>\n        <div className={loaderClasses}>\n          <div className={style['signal']}></div>\n        </div>\n      </div>\n    );\n  }\n}\n","require(\"core-js/modules/es6.date.now\");\n\n// Generated by CoffeeScript 1.12.2\n(function () {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if (typeof performance !== \"undefined\" && performance !== null && performance.now) {\n    module.exports = function () {\n      return performance.now();\n    };\n  } else if (typeof process !== \"undefined\" && process !== null && process.hrtime) {\n    module.exports = function () {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n\n    hrtime = process.hrtime;\n\n    getNanoSeconds = function getNanoSeconds() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function () {\n      return Date.now() - loadTime;\n    };\n\n    loadTime = Date.now();\n  } else {\n    module.exports = function () {\n      return new Date().getTime() - loadTime;\n    };\n\n    loadTime = new Date().getTime();\n  }\n}).call(this);","var now = require('performance-now'),\n    root = typeof window === 'undefined' ? global : window,\n    vendors = ['moz', 'webkit'],\n    suffix = 'AnimationFrame',\n    raf = root['request' + suffix],\n    caf = root['cancel' + suffix] || root['cancelRequest' + suffix];\n\nfor (var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix];\n  caf = root[vendors[i] + 'Cancel' + suffix] || root[vendors[i] + 'CancelRequest' + suffix];\n} // Some versions of FF have rAF but not cAF\n\n\nif (!raf || !caf) {\n  var last = 0,\n      id = 0,\n      queue = [],\n      frameDuration = 1000 / 60;\n\n  raf = function raf(callback) {\n    if (queue.length === 0) {\n      var _now = now(),\n          next = Math.max(0, frameDuration - (_now - last));\n\n      last = next + _now;\n      setTimeout(function () {\n        var cp = queue.slice(0); // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n\n        queue.length = 0;\n\n        for (var i = 0; i < cp.length; i++) {\n          if (!cp[i].cancelled) {\n            try {\n              cp[i].callback(last);\n            } catch (e) {\n              setTimeout(function () {\n                throw e;\n              }, 0);\n            }\n          }\n        }\n      }, Math.round(next));\n    }\n\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    });\n    return id;\n  };\n\n  caf = function caf(handle) {\n    for (var i = 0; i < queue.length; i++) {\n      if (queue[i].handle === handle) {\n        queue[i].cancelled = true;\n      }\n    }\n  };\n}\n\nmodule.exports = function (fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn);\n};\n\nmodule.exports.cancel = function () {\n  caf.apply(root, arguments);\n};\n\nmodule.exports.polyfill = function (object) {\n  if (!object) {\n    object = root;\n  }\n\n  object.requestAnimationFrame = raf;\n  object.cancelAnimationFrame = caf;\n};"],"sourceRoot":""}